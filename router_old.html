<!DOCTYPE html>
<html>

<head>
    <title>Geolocation</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />

    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>

    <link rel="stylesheet" href="menu.css">
</head>

<body>
<div id="map" style="width:100%; height: 100vh"></div>

<div id="info">
    <br/>

    <br/>
</div>
<div class="overlay">
    <div id="log"></div>
    <div class="menu">
        <div class="navigation">
            <ul>
                <li class="list">
                    <a href="index.html">
                        <span class="icon"><ion-icon name="planet-outline"></ion-icon></span>
                        <span class="text">home</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                        <span class="icon"><ion-icon name="map-outline"></ion-icon></span>
                        <span class="text">map</span>
                    </a>
                </li>
                <li class="list active">
                    <a href="router.html">
                        <span class="icon"><ion-icon name="navigate-circle-outline"></ion-icon></span>
                        <span class="text">router</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                        <span class="icon"><ion-icon name="speedometer-outline"></ion-icon></span>
                        <span class="text">meter</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                        <span class="icon"><ion-icon name="document-text-outline"></ion-icon></span>
                        <span class="text">note</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                        <span class="icon"><ion-icon name="document-text-outline"></ion-icon></span>
                        <span class="text">photo</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#">
                        <span class="icon"><ion-icon name="videocam-outline"></ion-icon></span>
                        <span class="text">photo</span>
                    </a>
                </li>

            </ul>
        </div>
    </div>

</div>



<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

<script>

    var map = L.map('map').setView([28.2380, 83.9956], 11);
    mapLink = "<a href='http://openstreetmap.org'>OpenStreetMap</a>";
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: 'Leaflet &copy; ' + mapLink + ', contribution', maxZoom: 18 }).addTo(map);

    var taxiIcon = L.icon({
        iconUrl: 'img/taxi.png',
        iconSize: [70, 70]
    })

    var marker = L.marker([28.2380, 83.9956], { icon: taxiIcon }, 17).addTo(map);

    map.on('click', function (e) {
        console.log(e)
        var newMarker = L.marker([e.latlng.lat, e.latlng.lng]).addTo(map);
        L.Routing.control({
            waypoints: [
                L.latLng(28.2380, 83.9956),
                L.latLng(e.latlng.lat, e.latlng.lng)
            ]
        }).on('routesfound', function (e) {
            var routes = e.routes;
            console.log(routes);

            e.routes[0].coordinates.forEach(function (coord, index) {
                setTimeout(function () {
                    marker.setLatLng([coord.lat, coord.lng]);
                }, 100 * index)
            })

        }).addTo(map);
    });


</script>


</body>

</html>